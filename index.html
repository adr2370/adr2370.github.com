<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>adr2370 Testing Page</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width">
</head>
<body>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
	<script src="js/three.min.js"></script>
	<script type="text/javascript">
		var renderer = new THREE.WebGLRenderer();
		renderer.setSize( 800, 		600 );
		document.body.appendChild( renderer.domElement );
		var scene = new THREE.Scene();
		var camera = new THREE.PerspectiveCamera(
		                                35,             // Field of view
		                                800 / 600,      // Aspect ratio
		                                0.1,            // Near plane
		                                10000           // Far plane
		                            );
		camera.position.set( -15, 10, 10 );
		camera.lookAt( scene.position );
		scene.add( camera );
		var cubes = new Array();
		cubes.push(new THREE.Mesh(
		                        new THREE.CubeGeometry( 1, 1, 1 ),
		                        new THREE.MeshLambertMaterial( { color: 0xFF0000 } )
		                    ));
		scene.add( cubes[0] );
		var light = new THREE.PointLight( 0xFFFFFF );
		light.position.set( 10, 10, 10 );
		scene.add( light );
		renderer.render( scene, camera );
		var currX=0;
		var currZ=0;
		animate();
		function animate() {
			if(cubes.length<15) {
				requestAnimationFrame( animate );
			}
			var color1=0xFF0000;
			for(var i=0;i<cubes.length;i++) color1+=0x001100;
			cubes.push(new THREE.Mesh(
			                        new THREE.CubeGeometry( 1, 1, 1 ),
			                        new THREE.MeshLambertMaterial( { color: color1 } )
			                    ));
			var step=cubes.length;
			var s=Math.floor(Math.sqrt(step));
			if(s%2==0) s--;
			var diff=step-s*s;
			var c=cubes.length-1;
			if(diff<=1) {
				currZ+=1;
			} else if(diff<=s+1) {
				currX+=1;
			} else if(diff<=s*2+2) {
				currZ-=1;
			} else if(diff<=s*3+3) {
				currX-=1;
			} else {
				currZ+=1;
			}
			cubes[c].position.x=currX;
			cubes[c].position.z=currZ;
			scene.add( cubes[c] );
			renderer.render( scene, camera );
		}
	</script>
</body>
</html>
